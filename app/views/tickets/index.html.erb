<h1>Ticket Manager</h1>

<div id="ticket_index_table">	
	<table>
		<tr>
			<th>#</th>
			<th>Title</th>
			<th>Status</th>
			<th>Created By</th>
			<th>Assigned To</th>
			<th>Last Updated</th>
			<th></th>
			<th></th>
		</tr>
		
		<% @ticket.each do |ticket| %>
		<tr id="table_rows">
			<td><%= ticket.id %></td>
			<td><%= ticket.title %></td>
			<td><%= ticket.status %></td>
			<td><%= ticket.created_user_id.nil? ? nil : "#{ticket.created_user.firstname} #{ticket.created_user.lastname}" %></td>
			<td><%= ticket.assigned_user_id.nil? ? nil : "#{ticket.assigned_user.firstname} #{ticket.assigned_user.lastname}" %></td>
			<td><%= ticket.updated_at.in_time_zone("Pacific Time (US & Canada)").strftime( "%l:%M%p %_m/%-d/%Y" ) %></td>
			
			<td>
				<button id="table_button" type="button">
					<%= link_to "Edit", edit_ticket_path(ticket) %>
				</button>
			</td>
			
			<td>
				<button id="table_button" type="button">
					<%= link_to "Delete", ticket, method: :delete, data: { confirm: "Are you sure?" } %>
				</button>
			</td>
		</tr>
		<% end %>
	</table><br />
	<button id="table_button" type="button"><%= link_to "New Ticket", new_ticket_path %></button>
</div>

